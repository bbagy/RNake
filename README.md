# RNake

RNake is a Snakemake pipeline designed for RNA sequencing data analysis. This pipeline is built for convenience, allowing users to easily process both single and paired-end FASTQ inputs. It automates the steps of trimming, mapping, counting, and merging RNA-seq data, ensuring reproducibility and efficiency.

## Features

- **Automated Workflow**: Automates the RNA-seq analysis process from raw FASTQ files to final count tables.
- **Single & Paired-End Support**: Handles both single-end and paired-end reads.
- **Flexible Configuration**: Easily configurable for different projects and input data.

## Installation

Clone the repository and navigate to the project directory:

```bash
git clone https://github.com/bbagy/RNake.git
cd RNake
```

Make sure you have all necessary dependencies installed, including Snakemake, Python, and other tools specified in the YAML files.

## Usage

To run the pipeline, use the following command:

```bash
pro=(your_project_name)
fastqs=(your_fastq_directory)
genome=(your_genome_file)
gff=(your_gff_file)

snakemake -s /your_path/Go_bacteriaRNake_paired_V3.smk --cores 16 --config project=$pro read_dir=$fastqs genome=$genome gff=$gff --rerun-incomplete --use-conda
```

Replace `your_project_name`, `your_fastq_directory`, `your_genome_file`, `your_gff_file`, and `your_path` with the appropriate paths or filenames for your specific analysis.

### Example

```bash
pro=(f31_conj_p2)
fastqs=(pool2)
genome=(reference/C16.01.flye.20240523.fna)
gff=(reference/C16.01.flye.20240523.cleaned.gff)

snakemake -s /home/uhlemann/heekuk_path/Go_bacteriaRNake_paired_V3.smk --cores 16 --config project=$pro read_dir=$fastqs genome=$genome gff=$gff --rerun-incomplete --use-conda
```

## Handling Prokka Output GFF Files

If you are using a GFF file generated by Prokka, it may contain a FASTA section at the end, which can cause issues during processing. To clean the GFF file, removing the FASTA part, use the following command:

```bash
sed '/^##FASTA$/,$d' your_prokka_output.gff > your_cleaned_output.gff
```

Replace `your_prokka_output.gff` with the name of your Prokka output file, and `your_cleaned_output.gff` with the desired output filename.

### Example

```bash
sed '/^##FASTA$/,$d' C16.01.flye.20240523.gff > C16.01.flye.20240523.cleaned.gff
```

## Required Tools

The pipeline requires several tools, which are specified in the YAML files for Conda environments:

- **Trimmomatic**: For trimming the reads.
- **Bowtie2**: For mapping reads to the reference genome.
- **SAMtools**: For processing SAM/BAM files.
- **HTSeq**: For counting reads mapped to genes.

These tools are managed by Conda environments to ensure that the correct versions are used.

## Contributing

We welcome contributions to improve this pipeline. Please fork the repository and create a pull request with your changes.

## License

This project does not have a specific license. Please contact the repository owner for permissions regarding usage, distribution, or modification.

## Contact

For any questions or issues, please open an issue on this repository or contact hp2523@cumc.columbia.edu.
